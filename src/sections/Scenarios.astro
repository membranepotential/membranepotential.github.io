---
import frontpage from '../frontpage.yaml'

const slides = frontpage.scenarios
const defaultActiveSlide = 0
---

<div class="flex items-center justify-between p-8">
  <!-- Left side: Titles -->
  <div class="w-1/2 space-y-6">
    {
      slides.map((slide, index) => (
        <h2
          class={`title cursor-pointer text-2xl font-bold transition-opacity duration-300 ${
            index === defaultActiveSlide ? 'active-slide' : 'inactive-slide'
          }`}
        >
          {slide.title}
        </h2>
      ))
    }
  </div>

  <!-- Right side: Image and Subtext -->
  <div class="flex w-1/2 flex-col items-center">
    {
      slides.map((slide, index) => (
        <div
          class={`slide w-full ${index === defaultActiveSlide ? 'block' : 'hidden'}`}
        >
          {slide.image ? (
            <img
              src={slide.image}
              alt={slide.title}
              class="mb-4 h-64 w-full rounded-md object-cover shadow-lg transition-opacity"
            />
          ) : (
            <div class="mb-4 flex h-64 w-full min-w-full items-center justify-center rounded-md bg-gray-200 shadow-lg">
              <p class="text-gray-500">Image Not Available</p>
            </div>
          )}
          <p class="text-gray-600">{slide.description}</p>
        </div>
      ))
    }
  </div>
</div>

<script>
  const titles = document.querySelectorAll('h2')
  const slides = document.querySelectorAll('.slide')
  let currentSlide = 0

  const changeSlide = (index: number) => {
    // Hide the current slide
    slides[currentSlide].classList.add('hidden')
    slides[currentSlide].classList.remove('block')

    // Remove active class from the current title
    titles[currentSlide].classList.remove('active-slide')
    titles[currentSlide].classList.add('inactive-slide')

    // Update current slide index
    currentSlide = index % slides.length

    // Show the new slide
    slides[currentSlide].classList.remove('hidden')
    slides[currentSlide].classList.add('block')

    // Add active class to the new title
    titles[currentSlide].classList.add('active-slide')
    titles[currentSlide].classList.remove('inactive-slide')
  }

  // Change the slide every 3 seconds automatically
  const interval = setInterval(() => changeSlide(currentSlide + 1), 3000)

  // Add click event listener to each title
  titles.forEach((title, index) => {
    title.addEventListener('click', () => {
      changeSlide(index)
      clearInterval(interval)
    })
  })
</script>

<style>
  /* Default inactive styles for the titles */
  .inactive-slide {
    color: #94a3b8; /* text-gray-400 */
    opacity: 0.5;
  }

  /* When the title is active, add the 'active-slide' class */
  .active-slide {
    color: #1e3a8a; /* text-blue-900 */
    opacity: 1;
  }
</style>
